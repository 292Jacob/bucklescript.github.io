<!DOCTYPE html><html lang="zh-TW"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>與 JS 建置系統交互作用 · BuckleScript</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="If you come from JS, chances are that you already have a build system in your existing project. Here&#x27;s an overview of the role bsb would play in your build pipeline, if you want to introduce some BS code into the codebase."/><meta name="docsearch:language" content="zh-TW"/><meta property="og:title" content="與 JS 建置系統交互作用 · BuckleScript"/><meta property="og:type" content="website"/><meta property="og:url" content="https://bucklescript.github.io/index.html"/><meta property="og:description" content="If you come from JS, chances are that you already have a build system in your existing project. Here&#x27;s an overview of the role bsb would play in your build pipeline, if you want to introduce some BS code into the codebase."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/logos/bucklescript.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"/><link rel="alternate" type="application/atom+xml" href="https://bucklescript.github.io/blog/atom.xml" title="BuckleScript Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://bucklescript.github.io/blog/feed.xml" title="BuckleScript Blog RSS Feed"/><script type="text/javascript" src="/js/toggleSyntaxButton.js"></script><script type="text/javascript" src="/js/pjax-api.min.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/zh-TW"><img class="logo" src="/img/logos/bucklescript.svg" alt="BuckleScript"/><h2 class="headerTitleWithLogo">BuckleScript</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/zh-TW/installation" target="_self">文件</a></li><li class=""><a href="/docs/zh-TW/playground" target="_self">體驗</a></li><li class="siteNavGroupActive"><a href="/docs/zh-TW/stdlib-overview" target="_self">API</a></li><li class=""><a href="/docs/zh-TW/community" target="_self">社群</a></li><li class=""><a href="/blog" target="_self">部落格</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg"/>繁體中文</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/ja/interop-with-js-build-systems">日本語</a></li><li><a href="/docs/en/interop-with-js-build-systems">English</a></li><li><a href="/docs/es-ES/interop-with-js-build-systems">Español</a></li><li><a href="/docs/fr/interop-with-js-build-systems">Français</a></li><li><a href="/docs/ko/interop-with-js-build-systems">한국어</a></li><li><a href="/docs/pt-BR/interop-with-js-build-systems">Português (Brasil)</a></li><li><a href="/docs/ru/interop-with-js-build-systems">Русский</a></li><li><a href="/docs/zh-CN/interop-with-js-build-systems">中文</a></li><li><a href="https://crowdin.com/project/bucklescript" target="_blank" rel="noreferrer noopener">協助翻譯</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(){
          if(languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="https://github.com/bucklescript/bucklescript" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>建置系統</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">簡介</h3><ul><li class="navListItem"><a class="navItem" href="/docs/zh-TW/what-why">什麼 &amp; 為何</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/installation">安裝</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/new-project">新增專案</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/concepts-overview">概念概述</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">交互作用</h3><ul><li class="navListItem"><a class="navItem" href="/docs/zh-TW/interop-overview">概覽</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/interop-cheatsheet">快捷手冊</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/embed-raw-javascript">嵌入原始 JavaScript</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/common-data-types">常見資料型別</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/intro-to-external">External 介紹</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/bind-to-global-values">繫結全域值</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/null-undefined-option">Null、Undefined &amp; Option</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/object">物件</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/object-deprecated">物件（過時）</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/class">Class</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/function">函式</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/import-export">匯入 &amp; 匯出</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/regular-expression">正規表示式</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/exceptions">例外</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/json">JSON</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/fast-pipe">快速 Pipe</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/generate-converters-accessors">產生轉譯器 &amp; Helpers</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/better-data-structures-printing-debug-mode">輸出更好的資料結構（除錯模式）</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/nodejs-special-variables">NodeJS 特殊變數</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/interop-misc">其他設定</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/browser-support-polyfills">瀏覽器支援 &amp; Polyfills</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">建置系統</h3><ul><li class="navListItem"><a class="navItem" href="/docs/zh-TW/build-overview">概覽</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/build-configuration">配置</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/automatic-interface-generation">自動產生介面</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/zh-TW/interop-with-js-build-systems">與 JS 建置系統交互作用</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/build-performance">效能</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/build-advanced">進階</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">標準函式庫</h3><ul><li class="navListItem"><a class="navItem" href="/docs/zh-TW/stdlib-overview">概要</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">進階</h3><ul><li class="navListItem"><a class="navItem" href="/docs/zh-TW/conditional-compilation">條件編譯</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/extended-compiler-options">擴展編譯器選項</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/use-existing-ocaml-libraries">使用既有 OCaml 函式庫</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/difference-from-native-ocaml">與原生 OCaml 差異</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/compiler-architecture-principles">編譯器架構 &amp; 原則</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/comparison-to-jsoo">與 Js_of_ocaml 的比較</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/bucklescript/zh-TW" target="_blank" rel="noreferrer noopener">Translate</a><h1 class="postHeaderTitle">與 JS 建置系統交互作用</h1></header><article><div><span><p>If you come from JS, chances are that you already have a build system in your existing project. Here's an overview of the role bsb would play in your build pipeline, if you want to introduce some BS code into the codebase.</p>
<h2><a class="anchor" aria-hidden="true" id="popular-js-build-systems"></a><a href="#popular-js-build-systems" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Popular JS Build Systems</h2>
<p>The JS ecosystem uses a few build systems: <a href="http://browserify.org/">browserify</a>, <a href="https://github.com/rollup/rollup">rollup</a>, <a href="https://webpack.js.org/">webpack</a>, etc. The latter's probably the most popular of the three (as of December 2017 =P). These build systems do both the compilation and the linking (aka, bundling many files into one or few files).</p>
<p>BuckleScript and bsb only take care of the compilation step; it maps one ml/re/mli/rei file into one JS output file. As such, in theory, no build system integration is needed from our side. From e.g. the webpack watcher's perspective, the JS files BuckleScript generates are almost equivalent to your hand-written JS files. We also recommend that you initially check in those BS-generated JS files, as this workflow means:</p>
<ul>
<li>You can introduce BuckleScript and/or Reason silently into your codebase without disturbing existing build infra.</li>
<li>You have a visual diff of the performance &amp; correctness of your JS file when you update the ml/re files and the JS artifacts change.</li>
<li>You can let teammates hot-patch the JS files in emergency situations, without needing to first start learning BS/Reason.</li>
<li>You can remove BuckleScript and Reason completely from your codebase and things will still work (in case your company decides to stop using us for whatever reason).</li>
</ul>
<p>The slight disavantage of such approach is that you need to keep both a bsb watcher and a webpack watcher open. Though if you activate <a href="https://github.com/reasonml-editor/vscode-reasonml#bsb">VSCode-Reasonml's bsb feature</a>, you avoid the former rather seamlessly.</p>
<p>For what it's worth, you can also turn bsb into an automated step in your build pipeline (e.g. into a webpack loader, like our <a href="https://github.com/reasonml-community/bs-loader">deprecated bs-loader here</a>).</p>
<h3><a class="anchor" aria-hidden="true" id="tips-tricks"></a><a href="#tips-tricks" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tips &amp; Tricks</h3>
<p>You can make BS JS files look even more idiomatic through the in-source + bs suffix config in <code>bsconfig.json</code>:</p>
<pre><code class="hljs css languages- json">{
  "package-specs": {
    "module": "commonjs", // or whatever module system your project uses
    "in-source": true
  },
  "suffix": ".bs.js"
}
</code></pre>
<p>This will:</p>
<ul>
<li>Generate the JS files alongside your BS source files.</li>
<li>Use the file extension <code>.bs.js</code>, so that you can require these files on the JS side through <code>require('./MyFile.bs')</code>, without needing a loader.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="use-loaders-on-bs-side"></a><a href="#use-loaders-on-bs-side" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Use Loaders on BS Side</h2>
<p>&quot;What if my build system uses a CSS/png/whatever loader and I'd like to use it in BuckleScript?&quot;</p>
<p>Loaders are indeed troublesome; in the meantime, please use e.g. <code>[%raw {|require('./myStyles.css')|}]</code> at the top of your file. This just uses <a href="/docs/zh-TW/embed-raw-javascript"><code>raw</code></a> to compile the snippet into an actual JS require.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/zh-TW/automatic-interface-generation">← 自動產生介面</a><a class="docs-next button" href="/docs/zh-TW/build-performance">效能 →</a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#popular-js-build-systems">Popular JS Build Systems</a><ul class="toc-headings"><li><a href="#tips-tricks">Tips &amp; Tricks</a></li></ul></li><li><a href="#use-loaders-on-bs-side">Use Loaders on BS Side</a></li></ul></nav></div><span><script src="/js/redirectBlog.js"></script><script>window.foo = new Pjax({
          areas: [
            // try to use the first query.
            '.mainContainer, .docsNavContainer .toc .navWrapper, .onPageNav',
            // fallback
            'body'
          ],
          link: '.docsNavContainer:not(.docsSliderActive) a',
          update: {
            script: false,
          }
        });
        var languagesMenuItemCopy = document.getElementById("languages-menu");
        languagesMenuItemCopy.addEventListener("click", function(e){
          e.preventDefault();
          e.stopPropagation();
          e.stopImmediatePropagation();
        });</script></span></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              var search = docsearch({
                
                apiKey: '0fd97db83891aa20810559812d9e69ac',
                indexName: 'bucklescript',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["lang:zh-TW"]}
              });
            </script></body></html>