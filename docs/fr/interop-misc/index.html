<!DOCTYPE html><html lang="fr"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Miscellaneous · BuckleScript</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Composing `bs` Attributes"/><meta name="docsearch:language" content="fr"/><meta property="og:title" content="Miscellaneous · BuckleScript"/><meta property="og:type" content="website"/><meta property="og:url" content="https://bucklescript.github.io/index.html"/><meta property="og:description" content="## Composing `bs` Attributes"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/logos/bucklescript.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"/><link rel="alternate" type="application/atom+xml" href="https://bucklescript.github.io/blog/atom.xml" title="BuckleScript Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://bucklescript.github.io/blog/feed.xml" title="BuckleScript Blog RSS Feed"/><script type="text/javascript" src="/js/toggleSyntaxButton.js"></script><script type="text/javascript" src="/js/pjax-api.min.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/fr"><img class="logo" src="/img/logos/bucklescript.svg" alt="BuckleScript"/><h2 class="headerTitleWithLogo">BuckleScript</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/fr/installation" target="_self">Docs</a></li><li class=""><a href="/docs/fr/playground" target="_self">Essayer</a></li><li class="siteNavGroupActive"><a href="/docs/fr/stdlib-overview" target="_self">API</a></li><li class=""><a href="/docs/fr/community" target="_self">Communauté</a></li><li class=""><a href="/blog" target="_self">Blog</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg"/>Français</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/ja/interop-misc">日本語</a></li><li><a href="/docs/en/interop-misc">English</a></li><li><a href="/docs/es-ES/interop-misc">Español</a></li><li><a href="/docs/ko/interop-misc">한국어</a></li><li><a href="/docs/pt-BR/interop-misc">Português (Brasil)</a></li><li><a href="/docs/ru/interop-misc">Русский</a></li><li><a href="/docs/zh-CN/interop-misc">中文</a></li><li><a href="/docs/zh-TW/interop-misc">繁體中文</a></li><li><a href="https://crowdin.com/project/bucklescript" target="_blank" rel="noreferrer noopener">Aider à traduire</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="https://github.com/bucklescript/bucklescript" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Interop</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Intro</h3><ul><li class="navListItem"><a class="navItem" href="/docs/fr/what-why">What &amp; Why</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/new-project">Nouveau Projet</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/concepts-overview">Vue d’Ensemble des Concepts</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Interop</h3><ul><li class="navListItem"><a class="navItem" href="/docs/fr/interop-overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/interop-cheatsheet">Cheatsheet</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/embed-raw-javascript">Embed Raw JavaScript</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/common-data-types">Types de données communs</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/intro-to-external">Intro to External</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/bind-to-global-values">Bind to Global Values</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/null-undefined-option">Null, Undefined &amp; Option</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/object">Objet</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/object-2">Object 2</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/class">Class</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/function">Fonction</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/import-export">Import &amp; Export</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/regular-expression">Expression régulière</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/exceptions">Exceptions</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/json">JSON</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/fast-pipe">Fast Pipe</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/generate-converters-accessors">Generate Converters &amp; Helpers</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/better-data-structures-printing-debug-mode">Better Data Structures Printing (Debug Mode)</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/nodejs-special-variables">NodeJS Special Variables</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/fr/interop-misc">Miscellaneous</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/browser-support-polyfills">Support navigateur et Polyfills</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Build System</h3><ul><li class="navListItem"><a class="navItem" href="/docs/fr/build-overview">Vue d&#x27;ensemble</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/build-configuration">Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/automatic-interface-generation">Automatic Interface Generation</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/interop-with-js-build-systems">Interop with JS Build System</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/build-performance">Performance</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/build-advanced">Advanced</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Standard Library</h3><ul><li class="navListItem"><a class="navItem" href="/docs/fr/stdlib-overview">Overview</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Advanced</h3><ul><li class="navListItem"><a class="navItem" href="/docs/fr/conditional-compilation">Compilation Conditionnelle</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/extended-compiler-options">Extended Compiler Options</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/use-existing-ocaml-libraries">Utiliser les bibliothèques OCaml existantes</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/difference-from-native-ocaml">Différence avec OCaml Natif</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/compiler-architecture-principles">Architecture du Compilateur &amp; Principes</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/comparison-to-jsoo">Comparison to Js_of_ocaml</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/bucklescript/fr" target="_blank" rel="noreferrer noopener">Translate</a><h1 class="postHeaderTitle">Miscellaneous</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="composing-bs-attributes"></a><a href="#composing-bs-attributes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Composing <code>bs</code> Attributes</h2>
<p>As you might have guessed, most <code>bs.*</code> attributes can be used together. Here's an extreme example:</p>
<pre><code class="hljs css languages- ocaml"><span class="hljs-keyword">external</span> draw: (_ [@bs.<span class="hljs-keyword">as</span> <span class="hljs-string">"dog"</span>]) -&gt; <span class="hljs-built_in">int</span> <span class="hljs-built_in">array</span> -&gt; <span class="hljs-built_in">unit</span> = <span class="hljs-string">"draw"</span> [@@bs.<span class="hljs-keyword">val</span>] [@@bs.scope <span class="hljs-string">"global"</span>] [@@bs.splice]

<span class="hljs-keyword">let</span> _ = draw [|<span class="hljs-number">1</span>;<span class="hljs-number">2</span>|]
</code></pre>
<pre><code class="hljs css languages- reason">[@bs.val] [@bs.scope <span class="hljs-string">"global"</span>] [@bs.splice]
external draw : <span class="hljs-function"><span class="hljs-params">([@bs.<span class="hljs-keyword">as</span> <span class="hljs-string">"dog"</span>] _, array(int))</span> =&gt;</span> unit = <span class="hljs-string">"draw"</span>;

draw([|<span class="hljs-number">1</span>, <span class="hljs-number">2</span>|]);
</code></pre>
<p>Output:</p>
<pre><code class="hljs css languages- js">global.draw(<span class="hljs-string">"dog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>);
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="safe-external-data-handling"></a><a href="#safe-external-data-handling" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Safe External Data Handling</h2>
<p>In some cases, the data could either come from JS or BS; it's very hard to give precise type information because of this. For example, for an external promise whose creation could come from the JS API, its failed value caused by <code>Promise.reject</code> could be of any shape.</p>
<p>BuckleScript provides a solution, <code>bs.open</code>, to filter out OCaml structured exception data from the mixed data source. It preserves type safety while allowing you to deal with mixed source. It makes use of OCaml’s extensible variant, so that users can mix values of type <code>exn</code> with JS data.</p>
<pre><code class="hljs css languages- ocaml"><span class="hljs-keyword">let</span> handleData = <span class="hljs-keyword">function</span> [@bs.<span class="hljs-keyword">open</span>]
 | <span class="hljs-type">Invalid_argument</span> _ -&gt; <span class="hljs-number">0</span>
 | <span class="hljs-type">Not_found</span> -&gt; <span class="hljs-number">1</span>
 | <span class="hljs-type">Sys_error</span> _ -&gt; <span class="hljs-number">2</span>

<span class="hljs-comment">(* val handleData : 'a -&gt; int option *)</span>
</code></pre>
<pre><code class="hljs css languages- reason"><span class="hljs-keyword">let</span> handleData = [@bs.open] (
  <span class="hljs-keyword">fun</span>
  | <span class="hljs-type">Invalid_argument</span>(<span class="hljs-keyword">_</span>) =&gt; <span class="hljs-number">0</span>
  | <span class="hljs-type">Not_found</span> =&gt; <span class="hljs-number">1</span>
  | <span class="hljs-type">Sys_error</span>(<span class="hljs-keyword">_</span>) =&gt; <span class="hljs-number">2</span>
);

<span class="hljs-comment">(* let handleData: 'a =&gt; option(int) *)</span>
</code></pre>
<p>For any input source, as long as it matches the exception pattern (nested pattern match supported), the matched value is returned, otherwise return <code>None</code>.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/fr/nodejs-special-variables">← NodeJS Special Variables</a><a class="docs-next button" href="/docs/fr/browser-support-polyfills">Support navigateur et Polyfills →</a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#composing-bs-attributes">Composing <code>bs</code> Attributes</a></li><li><a href="#safe-external-data-handling">Safe External Data Handling</a></li></ul></nav></div><span><script src="/js/redirectBlog.js"></script><script>window.foo = new Pjax({
          areas: [
            // try to use the first query.
            '.mainContainer, .docsNavContainer .toc .navWrapper, .onPageNav',
            // fallback
            'body'
          ],
          link: '.docsNavContainer:not(.docsSliderActive) a',
          update: {
            script: false,
          }
        });
        var languagesMenuItemCopy = document.getElementById("languages-menu");
        languagesMenuItemCopy.addEventListener("click", function(e){
          e.preventDefault();
          e.stopPropagation();
          e.stopImmediatePropagation();
        });</script></span></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              var search = docsearch({
                
                apiKey: '0fd97db83891aa20810559812d9e69ac',
                indexName: 'bucklescript',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["lang:fr"]}
              });
            </script></body></html>